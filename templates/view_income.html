{% extends "base.html" %}

{% block title %}Income - Personal Finance Tracker{% endblock %}

{% block content %}

<div class="page-header">
    <h1>üí∞ Income Tracking</h1>
    <p class="subtitle">View and manage all your income records</p>
</div>

<!-- Add Income Button -->
<div style="margin-bottom: 1.5rem;">
    <a href="{{ url_for('add_income') }}" class="btn btn-primary">
        <span style="font-size: 1.2rem;">+</span> Add Income
    </a>
</div>

<!-- Summary Statistics -->
<div class="stats-grid" style="margin-bottom: 2rem;">
    <div class="stat-card stat-card-success">
        <div class="stat-icon">üíµ</div>
        <div class="stat-content">
            <h3 class="stat-label">Total Income</h3>
            <p class="stat-value">{{ total_income|currency }}</p>
        </div>
    </div>

    <div class="stat-card stat-card-primary">
        <div class="stat-icon">üìù</div>
        <div class="stat-content">
            <h3 class="stat-label">Total Records</h3>
            <p class="stat-value">{{ total_records }}</p>
        </div>
    </div>

    <div class="stat-card stat-card-info">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
            <h3 class="stat-label">Average Amount</h3>
            <p class="stat-value">
                {% if total_records > 0 %}
                    {{ (total_income / total_records)|currency }}
                {% else %}
                    $0.00
                {% endif %}
            </p>
        </div>
    </div>
</div>

{% if income_records %}
<!-- Income Table -->
<div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden;">
    <div style="padding: 1.5rem; border-bottom: 1px solid #e0e0e0;">
        <h2 style="margin: 0;">Income Records</h2>
    </div>

    <div class="table-container">
        <table class="expense-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Source</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for inc in income_records %}
                <tr>
                    <td data-label="Date">
                        {{ inc.date|date_format('%m/%d/%Y') }}
                    </td>
                    <td data-label="Source">
                        <span class="category-badge" style="background-color: {{ income_source_colors[inc.source] }}; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; font-weight: 600;">
                            {{ inc.source }}
                        </span>
                    </td>
                    <td data-label="Description">
                        {{ inc.description if inc.description else '‚Äî' }}
                    </td>
                    <td data-label="Amount" class="amount-cell" style="font-weight: 600; color: #10B981;">
                        +{{ inc.amount|currency }}
                    </td>
                    <td data-label="Actions" class="action-cell">
                        <a href="{{ url_for('edit_income', income_id=inc.id) }}" class="btn-icon" title="Edit">
                            ‚úèÔ∏è
                        </a>
                        <form method="POST" action="{{ url_for('delete_income_route', income_id=inc.id) }}" style="display: inline;">
                            <button type="submit" class="btn-icon btn-danger" title="Delete"
                                    onclick="return confirm('Are you sure you want to delete this income?\n\nDate: {{ inc.date }}\nSource: {{ inc.source }}\nAmount: {{ inc.amount|currency }}');"
                                    style="background: none; border: none; cursor: pointer; font-size: 1.25rem; padding: 0.25rem;">
                                üóëÔ∏è
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% else %}
<!-- Empty State -->
<div class="empty-state" style="text-align: center; padding: 3rem; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <p class="empty-icon" style="font-size: 4rem; margin-bottom: 1rem;">üí∞</p>
    <p class="empty-message" style="font-size: 1.25rem; color: #2C3E50; margin-bottom: 0.5rem;">No income recorded yet</p>
    <p class="empty-hint" style="color: #666; margin-bottom: 1.5rem;">Start tracking your earnings by adding your first income record!</p>
    <a href="{{ url_for('add_income') }}" class="btn btn-primary">Add Your First Income</a>
</div>
{% endif %}

{% endblock %}
